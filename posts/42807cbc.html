<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>从0开始搭建hexo+butterfly博客 | 三叶的博客</title><meta name="author" content="三叶sanye"><meta name="copyright" content="三叶sanye"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="什么是hexo?Hexo 是一个快速、简洁且高效的博客框架。 Hexo 使用 Markdown（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页（html）。 其他博客框架：vuepress , gatsby；前者适合vue开发者，后者适合react开发者。 安装hexo 需要提前准备的工具：vscode, git, node.js；去对应的官网下载即可。  在任意位置新建一个文"><meta property="og:type" content="article"><meta property="og:title" content="从0开始搭建hexo+butterfly博客"><meta property="og:url" content="https://www.sanye.blog/posts/42807cbc.html"><meta property="og:site_name" content="三叶的博客"><meta property="og:description" content="什么是hexo?Hexo 是一个快速、简洁且高效的博客框架。 Hexo 使用 Markdown（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页（html）。 其他博客框架：vuepress , gatsby；前者适合vue开发者，后者适合react开发者。 安装hexo 需要提前准备的工具：vscode, git, node.js；去对应的官网下载即可。  在任意位置新建一个文"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.sanye.blog/images/cover/%E6%B1%9F%E5%8D%97.jpg"><meta property="article:published_time" content="2024-11-26T14:14:21.000Z"><meta property="article:modified_time" content="2025-04-07T14:42:01.698Z"><meta property="article:author" content="三叶sanye"><meta property="article:tag" content="hexo"><meta property="article:tag" content="git"><meta property="article:tag" content="github"><meta property="article:tag" content="butterfly"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.sanye.blog/images/cover/%E6%B1%9F%E5%8D%97.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://www.sanye.blog/posts/42807cbc.html"><link rel="preconnect"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>(()=>{const t={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:t,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{if(e.startsWith("pjax"))return;const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const o=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=o,btf.activateLightMode=a;const n=t.get("theme"),r=window.matchMedia("(prefers-color-scheme: dark)"),c=window.matchMedia("(prefers-color-scheme: light)");if(void 0===n){if(c.matches)a();else if(r.matches)o();else{const e=(new Date).getHours();e<=6||e>=18?o():a()}r.addEventListener("change",(()=>{void 0===t.get("theme")&&(e.matches?o():a())}))}else"light"===n?a():o();const d=t.get("aside-status");void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!1},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"null",Snackbar:{chs_to_cht:"已切换为繁体中文",cht_to_chs:"已切换为简体中文",day_to_night:"已切换为深色模式",night_to_day:"已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-center"},infinitegrid:{js:"/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"从0开始搭建hexo+butterfly博客",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,isShuoshuo:!1}</script><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/time.css"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/bilibiliBanner/banner.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="iron-container iron-circle"><div class="iron-box1 iron-circle iron-center"></div><div class="iron-box2 iron-circle iron-center"></div><div class="iron-box3 iron-circle iron-center"></div><div class="iron-box4 iron-circle iron-center"></div><div class="iron-box5 iron-circle iron-center"></div><div class="iron-box6 iron-circle"><div class="iron-coil" style="--i:0"></div><div class="iron-coil" style="--i:1"></div><div class="iron-coil" style="--i:2"></div><div class="iron-coil" style="--i:3"></div><div class="iron-coil" style="--i:4"></div><div class="iron-coil" style="--i:5"></div><div class="iron-coil" style="--i:6"></div><div class="iron-coil" style="--i:7"></div></div></div></div><script>(()=>{const d=document.getElementById("loading-box"),e=document.body,o=()=>{e.style.overflow="",d.classList.add("loaded")},l=()=>{e.style.overflow="hidden",d.classList.remove("loaded")};l(),window.addEventListener("load",o)})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/%E4%B8%89%E5%8F%B6.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/images/cover/江南.png)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name iconfont icon-sanyecao">三叶的博客</span></a><a class="nav-page-title" href="/"><span class="site-name iconfont icon-sanyecao">从0开始搭建hexo+butterfly博客</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">从0开始搭建hexo+butterfly博客<a class="post-edit-link" href="https://github.com/shiyuhuiya/shiyuhuiya.github.io/issues_posts/hexo-butterfly博客搭建.md" rel="external nofollow noreferrer" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-11-26T14:14:21.000Z" title="发表于 2024-11-26 22:14:21">2024-11-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-04-07T14:42:01.698Z" title="更新于 2025-04-07 22:42:01">2025-04-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/hexo/">hexo</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">10.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2025-04-07 22:42:01&quot;}" hidden></div><h2 id="什么是hexo"><a href="#什么是hexo" class="headerlink" title="什么是hexo?"></a>什么是hexo?</h2><p>Hexo 是一个快速、简洁且高效的<strong>博客框架</strong>。 Hexo 使用 <code>Markdown</code>（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页（html）。</p><p>其他博客框架：vuepress , gatsby；前者适合vue开发者，后者适合react开发者。</p><h2 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h2><blockquote><p>需要提前准备的工具：vscode, git, node.js；去对应的官网下载即可。</p></blockquote><p>在任意位置新建一个文件夹，右键选择用vscode打开；或者直接打开vscode新建一个文件夹，取一个合适的名字，比如blog；右键文件夹，在当前文件下打开终端，执行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli //全局安装hexo</span><br><span class="line">hexo init blog //初始化一个博客blog</span><br><span class="line">cd blog //进入到博客文件</span><br><span class="line">npm install //安装所需依赖</span><br><span class="line">hexo server //在本地部署博客</span><br></pre></td></tr></table></figure><p>好了，再访问<code>http://localhost:4000</code>就能看到运行在本地的博客了</p><h2 id="hexo常用指令"><a href="#hexo常用指令" class="headerlink" title="hexo常用指令"></a>hexo常用指令</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">clean</span> <span class="string">//清除打包后的文件，即删除public文件夹</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">generate</span> <span class="string">//可以简写为hexo</span> <span class="string">g，作用是生成静态文件</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">server</span> <span class="string">//可以简写为hexo</span> <span class="string">s,部署自己的博客到本地，会打包文件但是不会输出实际文件</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">deploy</span> <span class="string">//部署自己的博客到服务器</span></span><br></pre></td></tr></table></figure><h2 id="项目结构分析"><a href="#项目结构分析" class="headerlink" title="项目结构分析"></a>项目结构分析</h2><ul><li><code>node_modules</code>：存放安装到本项目的npm包</li><li><code>scaffold</code>：存放md文档模板<ul><li><code>page.md</code>：页面的模板</li><li><code>post.md</code>：博客的模板</li></ul></li><li><code>source</code>：存放博客和页面的文件夹<ul><li><code>_post</code>：存放博客的文件夹，里面都是md文件，最终会被编译成html文件</li><li><code>categories</code>：存放分类页面的文件夹，通常只有一个文件</li><li><code>tags</code>：存放标签页面的文件夹，通常只要一个文件</li></ul></li><li><code>theme</code>：存放下载的主题的文件夹</li><li><code>_config.yml</code>：博客的配置文件</li><li><code>_config.主题名.yml</code>：主题的配置文件，自定义主题配置的地方</li></ul><h2 id="更换主题：butterfly"><a href="#更换主题：butterfly" class="headerlink" title="更换主题：butterfly"></a>更换主题：butterfly</h2><p>hexo自带的主题也许不是那么好看，没关系，hexo提供了丰富的主题给我们选择，我们可以去官网上查找，或者去GitHub上查找（推荐），下面我们以GitHub为例。</p><p>在国内直接访问github很不稳定，需要借助加速器，这里推荐<a target="_blank" rel="noopener external nofollow noreferrer" href="https://steampp.net/">steam++</a></p><p>没有账号的用自己的邮箱注册一个即可，登录后在home主界面搜索hexo themes，查找自己喜欢的主题，这里我们选择butterfly主题。</p><ul><li>下载</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><ul><li>在你的博客文件夹的<code>themes</code>文件夹中,就能看到<code>butterfly</code>文件夹，删除<code>.git</code>文件夹。</li><li>在博客根目录下新建<code>_config.butterfly.yml</code>文件，复制<code>themes/butterfly</code>文件夹下的<code>_config.yml</code>文件内容，粘贴到该文件，后续自定义博客几乎都在这个配置文件中进行。</li></ul><h2 id="新建博客文章"><a href="#新建博客文章" class="headerlink" title="新建博客文章"></a>新建博客文章</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new 文章名</span><br></pre></td></tr></table></figure><p>执行这条命令之后你就能在<code>source/_post</code>文件夹下看到一个新的md文件，它就是你编写博客的地方，所以在这之前，我们需要学习一下md语法，其实也是非常简单的。</p><p><strong>md文件结构分析</strong></p><ul><li><code>Front-matter</code>：是 markdown 文件最上方以<code>---</code>分隔的区域，<strong>不是写博客的区域，而是配置博客的区域</strong><ul><li><code>Page-Front-Matter</code>：用于 <strong>页面</strong> 配置</li><li><code>Post Front-matter</code>：用于 <strong>文章页</strong> 配置</li></ul></li></ul><p>具体是配置什么的直接看文档<a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.js.org/posts/dc584b87/">Butterfly 文檔(二) 主題頁面 | Butterfly</a></p><ul><li>用md语法写博客的区域</li></ul><p><strong>修改博客下方的文章链接</strong></p><p>在根目录下的<code>_config.yml</code>文件中修改，确保url是你博客部署的网址，替换掉默认的示例。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://www.sanye.blog</span></span><br></pre></td></tr></table></figure><p><strong>修改博客分享方式</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">share:</span></span><br><span class="line">  <span class="comment"># Choose: sharejs / addtoany</span></span><br><span class="line">  <span class="comment"># Leave it empty if you don&#x27;t need share</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">sharejs</span> <span class="comment">#选择提供分享功能的服务商，不需要分享功能则置空</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Share.js</span></span><br><span class="line">  <span class="comment"># https://github.com/overtrue/share.js</span></span><br><span class="line">  <span class="attr">sharejs:</span></span><br><span class="line">    <span class="attr">sites:</span> <span class="string">wechat,weibo,qq</span> <span class="comment">#选择分享到哪些平台</span></span><br></pre></td></tr></table></figure><h2 id="新建分类"><a href="#新建分类" class="headerlink" title="新建分类"></a>新建分类</h2><p>为了方便我们博客文章的查找，我们很自然的会想到给博客分类，执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories //本质是在创建一个页面page</span><br></pre></td></tr></table></figure><p>你会找到<code>source/categories/index.md</code>这个文件</p><p>修改这个文件的<code>Front-Matter</code>部分：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">分类</span>  </span><br><span class="line"><span class="attr">date:</span> <span class="number">2018-01-05 00:00:00</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&#x27;categories&#x27;</span></span><br></pre></td></tr></table></figure><p>然后我们在每篇博客的<code>Front-matter</code>部分就可以通过<code>categories</code>属性给文章分类。示例：categories: ‘book’</p><p><strong>注意</strong>：如果我们未创建分类页面，点击<strong>分类标签</strong>是会报错的，提示找不到该页面。</p><h2 id="新建标签"><a href="#新建标签" class="headerlink" title="新建标签"></a>新建标签</h2><p>我们还可以给每篇文章添加多个标签，执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags //本质也是在创建一个页面page</span><br></pre></td></tr></table></figure><p>你会找到<code>source/tags/index.md</code>这个文件</p><p>修改这个文件的<code>Front-Matter</code>部分：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&#x27;tags&#x27;</span></span><br></pre></td></tr></table></figure><p>然后我们在每篇博客的<code>Front-matter</code>部分就可以通过<code>tags</code>属性给文章添加标签，一篇文章可以添加多个标签，示例：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//要注意缩进，否则可能报错</span></span><br><span class="line"><span class="attr">tags:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;html&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;css&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：如果我们未创建tags页面，点击<strong>tags标签</strong>是会报错的，提示找不到该页面。</p><h2 id="自定义主页"><a href="#自定义主页" class="headerlink" title="自定义主页"></a>自定义主页</h2><p>博客的主页就是博客的首页，如下：</p><img src="../images/搭建hexo/home.png" style="width:600px"><p>自定义主页的<strong>详细内容见官方文档</strong><a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.js.org/posts/4aa8abbe/">Butterfly 文檔(三) 主題配置 | Butterfly</a>，下面我<strong>只介绍</strong>我遇到困难的部分。</p><h3 id="自定义菜单"><a href="#自定义菜单" class="headerlink" title="自定义菜单"></a>自定义菜单</h3><p>在<code>_config.butterfly.yml</code>文件中设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line"> <span class="attr">Home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line"> <span class="attr">Tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line"> <span class="attr">Categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br></pre></td></tr></table></figure><p>当然这些都是我认为最基础的菜单设置，<code>||</code>前面的表示的是<strong>页面的路径</strong>，后面表示的是<strong>图标</strong>。</p><p>在自定义这部分的时候我遇到了一个问题，就是无论如何配置，菜单上都会有<code>music和video</code>选项，原因是在<code>themes/butterfly</code>的<code>_config.yml</code>文件中，<code>music和video</code>选项是默认选中的。Hexo 会自动合并主题中的 <code>_config.yml</code> 和 <code>_config.butterfly.yml</code> 里的配置，如果存在同名配置，会使用<code>_config.butterfly.yml</code>的配置，其优先度较高。参考文档<a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly 文檔(一) 快速開始 | Butterfly</a></p><h3 id="添加搜索功能"><a href="#添加搜索功能" class="headerlink" title="添加搜索功能"></a>添加搜索功能</h3><p>如果能根据本地博客内容实现文章搜索，那实在是太方便了；hexo提供了多种搜索方式，其中本地搜索最容易实现。</p><p>前往博客根目录，打开cmd命令窗口执行:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>然后在<code>_config.butterfly.yml</code>文件中配置即可</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line"> <span class="comment"># Choose: algolia_search / local_search / docsearch</span></span><br><span class="line"> <span class="comment"># leave it empty if you don&#x27;t need search</span></span><br><span class="line"> <span class="attr">use:</span> <span class="string">local_search</span></span><br></pre></td></tr></table></figure><p>更多搜索方式参考文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jianshu.com/p/500e2e1e66c5">Hexo + Butterfly 键入搜索功能 - 简书</a>以及butterfly官方文档</p><h3 id="自定义首页图片"><a href="#自定义首页图片" class="headerlink" title="自定义首页图片"></a>自定义首页图片</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 禁用顶部图片</span></span><br><span class="line"><span class="attr">disable_top_img:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># The banner image of index page</span></span><br><span class="line"><span class="attr">index_img:</span> <span class="comment">#指定顶部图片</span></span><br><span class="line"><span class="comment"># The height of top_img, eg: 300px/300em/300rem</span></span><br><span class="line"><span class="attr">index_top_img_height:</span> <span class="string">16rem</span> <span class="comment">#指定顶部图片的高度</span></span><br></pre></td></tr></table></figure><p>这三个配置项默认并不在一起，但是我为了方便配置把它们放到了一起。</p><h3 id="引入图片"><a href="#引入图片" class="headerlink" title="引入图片"></a>引入图片</h3><ul><li><p>通过网络图片的形式引入</p><p>优点：减小打包体积</p><p>缺点：博客部署在github使用<code>网络图片</code>可能存在跨域问题</p></li><li><p>通过本地图片引入</p><p>优点： 不存在跨域问题，直接使用本地图片即可。</p><p>引入方式：在根目录下的source文件夹中新建一个<code>images</code>文件夹，然后本地图片都放里面(假设放入了一张图片xxx.jpg)，然后博客文章就能通过<code>../images/xxx.jpg</code>的相对路径来访问了。</p><p>而且为了让我们的博客图片无论在本地直接打开博客md文件的时候能正常显示，还是在部署到本地或者远程服务器的时候能正常显示，我们需要用<strong>img标签</strong>来展示我的图片，而不是使用<code>![]()</code>这种md语法。</p></li></ul><h3 id="B站banner"><a href="#B站banner" class="headerlink" title="B站banner"></a>B站banner</h3><p>用过B站的小伙伴应该都注意到了B站首页banner图片的特色，我们也可以用它来装饰自己的博客！</p><img src="../images/搭建hexo/banner.png" style="width:600px"><p>参考文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://akilar.top/posts/780a2cea/">Bilibili Dynamic Banner | Akilarの糖果屋</a></p><p>上述文章只给了2中banners，而且迁移到博客步骤比较多，所以我自己折腾了一下，当然也参考了别人的文章，并且部署到了github上：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/shiyuhuiya/BilibiliBannerToHexo">shiyuhuiya&#x2F;BilibiliBannerToHexo: 把B站banner添加到自己的hexo博客！</a></p><h3 id="自定义社交图标"><a href="#自定义社交图标" class="headerlink" title="自定义社交图标"></a>自定义社交图标</h3><img src="../images/搭建hexo/social.png" style="width:300px"><p>如上图就是社交图标，可以在<code>_config.butterfly.yml</code>文件的social属性中配置，点击即可跳转到相关网页。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fa-brands fa-bilibili:</span> <span class="string">https://space.bilibili.com/660655866?spm_id_from=333.1007.0.0</span> <span class="string">||</span> <span class="string">Bilibli</span> <span class="string">||</span> <span class="string">&#x27;#74C0FC&#x27;</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/syhy</span> <span class="string">||</span> <span class="string">Github</span> <span class="string">||</span> <span class="string">&#x27;#24292e&#x27;</span></span><br><span class="line">  <span class="attr">fas fa-envelope:</span> <span class="string">mailto:3519450570@qq.com</span> <span class="string">||</span> <span class="string">Email</span> <span class="string">||</span> <span class="string">&#x27;#4a7dbe&#x27;</span></span><br></pre></td></tr></table></figure><p>书写格式 图标名：url || 描述性文字 || color</p><p>图标名可在这个网站上查找：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://fontawesome.com/">fontawesome</a></p><h3 id="统计网站访客数目"><a href="#统计网站访客数目" class="headerlink" title="统计网站访客数目"></a>统计网站访客数目</h3><p>我们的博客是纯静态网页，没有涉及到与后端的数据交互，但是我们如果想要实现统计网站访客数目的功能，就必须借助后端，那该怎么实现呢？幸运的是，有人愿意<strong>免费</strong>给我们提供服务器来存储我们网站的访客数据。</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://busuanzi.ibruce.info/">不蒜子 - 极简网页计数器</a> 是一个轻量级的网站访问统计工具，它通过简单的 <strong>JavaScript 代码嵌入到网页</strong>中来实现访问次数的统计。</p><p><strong>大致原理</strong></p><p>当用户访问包含 Busuanzi 脚本的页面时，该脚本会在用户的浏览器上执行，然后发送一个<strong>jsonp请求</strong>，请求头中的<code>Referer</code>字段会携带当前网站的<code>url</code>，busuanzi服务器会从<code>Referer</code>字段中提取出<strong>网站的域名</strong>等信息，并将该域名对应的网站访问次数<strong>加1</strong>，再<strong>返回</strong>一串js代码，这串代码中包含了网站被访问次数等信息，然后浏览器会执行这串代码，把返回的信息<strong>渲染到页面上</strong>。具体原理参考<strong>源码</strong>。</p><p>如官网所示，我们只需在网页中引入一个js文件就行，对于butterfly主题的hexo博客，用上这个工具更是简单，我们只需要在主题配置文件中启用这个插件就行：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 确保开启webinfo，不然也不会显示访客数据</span></span><br><span class="line"><span class="attr">card_webinfo:</span></span><br><span class="line">	<span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>博客网站访客量<strong>虚高</strong>的原因。</p><ul><li><p>我们的博客部署在本地<strong>localhost:4000</strong>，大家都用这个域名测试博客，访客量当然特别高了，部署到自己的网站后就没问题了。</p></li><li><p>我们的博客网站所在域名之前可能已经使用过busuanzi提供的服务了，但是无论我们是按照官网的指示直接引入js文件，还是在butterfly的主题配置文件中开启相关配置，请求获取的都是官方的js文件，也就是<strong>源码</strong>，我们可以通过直接在浏览器导航栏输入官方js文件的网址（在官网已给出），从而下载，修改源码来解决这个问题。我们把下载好的源码放在<code>themes/butterfly/source/js目录</code>下，并在源码中做如下修改：</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们先分析这三个字段什么意思</span></span><br><span class="line"><span class="comment">// &quot;site_uv&quot;: 独立访客数</span></span><br><span class="line"><span class="comment">// &quot;page_pv&quot;: 当前页面的访问量</span></span><br><span class="line"><span class="comment">// &quot;site_pv&quot;: 站点总访问量</span></span><br><span class="line"><span class="attr">bszs</span>: [<span class="string">&quot;site_pv&quot;</span>, <span class="string">&quot;page_pv&quot;</span>, <span class="string">&quot;site_uv&quot;</span>],</span><br><span class="line">    <span class="attr">texts</span>: <span class="keyword">function</span> (<span class="params">a</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">bszs</span>.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">b</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> c = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;busuanzi_value_&quot;</span> + b);</span><br><span class="line">            <span class="keyword">if</span> (c) &#123;</span><br><span class="line">                <span class="keyword">switch</span> (b) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;site_pv&quot;</span>:</span><br><span class="line">                        c.<span class="property">innerHTML</span> = a[b]-虚高的值;</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;page_pv&quot;</span>:</span><br><span class="line">                        <span class="comment">//文章链接通常是唯一的，出现二手的概率很小，所以直接使用返回过来的值</span></span><br><span class="line">                        c.<span class="property">innerHTML</span> = a[b]</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;site_uv&quot;</span>:</span><br><span class="line">                        c.<span class="property">innerHTML</span> = a[b] - 虚高的值;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><p>然后在主题配置文件中修改busuanzi的默认cdn链接，指定为本地文件。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="attr">busuanzi:</span> <span class="string">/js/busuanzi.js</span></span><br></pre></td></tr></table></figure><p>当然，如果我们的博客因为<strong>部署的域名改变</strong>了，需要加上先前的访问次数，也可以使用这种方式来实现。</p><h3 id="live2D"><a href="#live2D" class="headerlink" title="live2D"></a>live2D</h3><p>谁不想给自己的博客界面添加一个可爱的看板娘呢？来看看如何实现吧。</p><img src="../images/搭建hexo/live2D.png" style="height:100px"><p>在github上有个star非常多的，基于hexo的live2D项目：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/EYHN/hexo-helper-live2d">EYHN&#x2F;hexo-helper-live2d: Add the Sseexxyyy live2d to your hexo!</a></p><p>部署起来也非常方便。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure><p>安装完成之后再配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">log:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#注释掉mode，使用的就是默认模型</span></span><br><span class="line">  <span class="comment">#mode:</span></span><br><span class="line">  	<span class="comment">#use:</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">100</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">200</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">react:</span></span><br><span class="line">    <span class="attr">opacity:</span> <span class="number">0.7</span></span><br></pre></td></tr></table></figure><p><strong>详细配置</strong>请前往原项目查看</p><p>其他可用模型：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/xiazeyu/live2d-widget-models">xiazeyu&#x2F;live2d-widget-models: Model library for live2d-widget.js</a>（交互功能不如默认模型）</p><p>其他live2D项目：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/stevenjoezhang/live2d-widget">stevenjoezhang&#x2F;live2d-widget: 把萌萌哒的看板娘抱回家 (ノ≧∇≦)ノ | Live2D widget for web platform</a></p><h2 id="永久链接"><a href="#永久链接" class="headerlink" title="永久链接"></a>永久链接</h2><p>Hexo 文章链接默认的生成规则是：<code>:year/:month/:day/:title</code>，是按照年、月、日、标题来生成的。</p><p>这样的话，生成的链接非常长，而且如果我们的 Markdown 使用中文标题，那就更惨了，URL 一转码，将是一场灾难。</p><p>更难受的是如果我们修改了文章的日期或者标题，那么将导致<strong>链接改变</strong>，别人或者你分享出去的文章就会 <strong>404</strong>，这非常的蛋疼啊，但是只要使用了<code>hexo-abbrlink</code>插件，便可解决以上出现的问题，不论你如何修改文章的日期、名称，只要不改变 <strong>footer-matter 中的 id 值</strong>，那么文章链接永远不会变。</p><ul><li><p>安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure></li><li><p>修改<code>_config.yml</code>配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## permalink: :year/:month/:day/:title/</span></span><br><span class="line">permalink: posts/:abbrlink.html</span><br></pre></td></tr></table></figure></li></ul><p>如果想要了解更多，去网上搜索资料即可，资料是非常多的。</p><h2 id="自定义页脚"><a href="#自定义页脚" class="headerlink" title="自定义页脚"></a>自定义页脚</h2><p>butterfly主题配置文件的<code>footer.custom_text</code>属性是支持传入html结构的，而其他footer属性不支持，我们可以选择关掉其他footer属性，把要定义的解构全写<code>footer.custom_text</code>里，可以放入一些彩色图标，添加更多结构，提供更大的自由度。</p><p>可以前往<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.iconfont.cn/">iconfont-阿里巴巴矢量图标库</a>寻找自己喜欢的图标，根据说明操作即可。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2024</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">&lt;div</span> <span class="string">id=&quot;sanye&quot;&gt;&lt;svg</span> <span class="string">class=&quot;icon&quot;</span> <span class="string">aria-hidden=&quot;true&quot;&gt;&lt;use</span> <span class="string">href=&quot;#icon-banquan&quot;&gt;&lt;/use&gt;&lt;/svg&gt;&lt;span&gt;2024</span> <span class="bullet">-</span> <span class="number">2025 </span><span class="string">By</span> <span class="string">三叶sanye&lt;/span&gt;&lt;svg</span> <span class="string">class=&quot;icon&quot;</span> <span class="string">aria-hidden=&quot;true&quot;&gt;&lt;use</span> <span class="string">href=&quot;#icon-sanyecao&quot;&gt;&lt;/use&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div</span> <span class="string">id=&quot;runtime&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">  <span class="comment"># Copyright of theme and framework</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="加载动画"><a href="#加载动画" class="headerlink" title="加载动画"></a>加载动画</h2><p>如果我们的博客部署在GitHub，或者我们的博客打开需要加载较多的网络资源，就会导致我们的博客打开很慢，这个时候通过加入加载动画就能优化读者的阅读体验。</p><p>butterfly主题提供了默认的加载动画，但是可能不够美观，这时候我们就可以根据自己的喜好自定义了。</p><p>自定义loading的大概步骤：</p><ul><li>修改loading.pug</li><li>修改loading.styl</li></ul><p>参考文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.meta-code.top/2022/06/18/2022-73/">多种加载动画</a></p><p>我在做自己的博客的时候，并没有完全跟着博客敲代码，而是先大致了解一下代码的逻辑，然后只选择了其中的一种加载动画—钢铁之心，所以省去了很多步骤，如果有像我一样不喜欢加载完成后展开的过渡效果的，可以对<code>source/css/_layout/loading.styl</code>文件做如下修改：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&amp;<span class="selector-class">.loaded</span></span><br><span class="line">     <span class="attribute">display</span> <span class="attribute">none</span></span><br><span class="line">     <span class="selector-class">.loading-left-bg</span></span><br><span class="line">       <span class="attribute">transition</span> <span class="attribute">all</span> <span class="number">1.0s</span></span><br><span class="line">       <span class="attribute">transform</span> <span class="attribute">translate</span>(-<span class="number">100%</span>, <span class="number">0</span>)</span><br><span class="line">     <span class="selector-class">.loading-right-bg</span></span><br><span class="line">       <span class="attribute">transition</span> <span class="attribute">all</span> <span class="number">1.0s</span></span><br><span class="line">       <span class="attribute">transform</span> <span class="attribute">translate</span>(<span class="number">100%</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>意思就是，页面加载完毕之后，直接隐藏<code>loading-box</code>。</p><p>如果要手动实现加载动画的话，除了一些css代码，核心就是<code>window</code>的<code>load</code>事件；</p><p>加载动画能够显示出来，也需要加载并解析它需要的css文件，为了让加载动画尽快显示出来，我们可以选择把这些css代码内联到html文件内，这样渲染加载动画无需等待其他首屏关键css文件，但是我们的博客有许多html页面（每篇文章都是一个独立的html页面），手动内联也太麻烦了…</p><p>如果加载动画需要的css代码，是通过link标签引入的，还要等待其他首屏关键css加载解析完毕，才能开始渲染加载动画，也就是说，开始加载css动画了，说明首屏关键css都加载完毕了，可以自己使用3G测试。</p><h2 id="修改鼠标样式"><a href="#修改鼠标样式" class="headerlink" title="修改鼠标样式"></a>修改鼠标样式</h2><p>修改起来也是很简单的，直接跟着文章敲代码就行。</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://cnhuazhu.top/butterfly/2021/07/05/Hexo%E9%AD%94%E6%94%B9/Hexo%E9%BC%A0%E6%A0%87%E6%A0%B7%E5%BC%8F%E4%BF%AE%E6%94%B9/">Hexo鼠标样式修改 | 花猪のBlog</a></p><p>大家也可以自行去查找更多的鼠标样式<br>上述鼠标样式使用的css文件是<strong>网络文件，</strong>现在链接好像已经失效了，我们可以选择把<strong>鼠标样式图片（.cur文件）</strong>下载到本地的<code>themes\butterfly\source\img</code>目录下然后通过绝对路径引入。如果你觉得某个博主的鼠标样式好看，也可以右键检查页面，查看网络日志，获取博主鼠标样式图片的链接然后直接下载到本地。</p><p>参考：</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://jiangnanpsalter.github.io/2024/04/05/hexo+butterfly%E4%B8%BB%E9%A2%98%E5%88%A9%E7%94%A8css%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99%E9%BC%A0%E6%A0%87%E6%8C%87%E9%92%88%E6%A0%B7%E5%BC%8F/">hexo+butterfly主题利用css部署网站鼠标指针样式 | JiangnanPsalter</a></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://pearlchocolatezy.com/2023/02/15/SetBlogCursorCSS/">Hexo|Butterfly修改鼠标指针样式 | 珍珠巧克力</a></p><h2 id="SEO优化"><a href="#SEO优化" class="headerlink" title="SEO优化"></a>SEO优化</h2><p>提高我们的博客在浏览器中的搜索排名，从而提高我们的博客的<strong>曝光量</strong>，让更多人看到。</p><ul><li><p>下载插件<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hexojs/hexo-filter-nofollow">hexojs&#x2F;hexo-filter-nofollow： 自动为所有外部链接添加 nofollow 属性。</a></p><p>通过给博客中引入的外部链接（比如a标签）添加<code>rel=&quot;noopener external nofollow noreferrer&quot;</code>属性来优化SEO</p><p><strong>noopener</strong>: 防止新打开的页面通过<code>window.opener</code>属性访问原始页面的<code>window</code>对象。</p><p><strong>external</strong>: 表示链接指向的是外部网站。</p><p><strong>nofollow</strong>: 告诉搜索引擎不要将这个链接视为对目标页面的信任投票；防止页面的链接权重传递给外部网站，有助于保留更多的链接权重；如果你的博客中包含指向低质量或垃圾网站的链接，使用<code>nofollow</code>可以减少这些链接对你的网站造成负面影响的风险。</p></li><li><p>下载插件<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/coneycode/hexo-generator-baidu-sitemap">Baidu Sitemap generator plugin for Hexo</a></p><p>下载并配置好后执行hexo g，会自动生成博客的站点地图。需要在百度搜索资源平台注册账号，添加并<strong>验证</strong>自己的网站，然后<strong>提交网站的sitemap.xml（站点地图）</strong>, 从而提高自己的网站在百度中的SEO</p><blockquote><p>如果购买的是国外域名，验证可能因超时而失败</p></blockquote></li><li><p>下载插件<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hexojs/hexo-generator-sitemap">hexojs&#x2F;hexo-generator-sitemap: Sitemap generator for Hexo.</a></p><p>下载并配置好后执行hexo g，会自动生成博客的站点地图。然后可以选择去google或者bing的资源平台验证自己的网站并提交站点地图，比较推荐提交到<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bing.com/webmasters/home">Home - Bing Webmaster Tools</a>，不需要科学上网。</p><p>参考文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.codejerry.cn/posts/hexoseo/">Hexo文章加密 &amp; 搜索引擎优化SEO &amp; 评论系统Twikoo | Yan Zhang’s blog</a></p></li></ul><h2 id="部署博客到github"><a href="#部署博客到github" class="headerlink" title="部署博客到github"></a>部署博客到github</h2><h3 id="部署方法"><a href="#部署方法" class="headerlink" title="部署方法"></a>部署方法</h3><p>方法1：可以通过<code>https://[username].github.io</code>的格式来访问部署的资源</p><ul><li><p>仓库名必须为<code>[username].github.io</code>，这样貌似必须通过<code>https://[username].github.io/[username].github.io</code>的方式来访问，其实只需要通过<code>https://[username].github.io</code>的方式来访问就行。</p><img src="..\images\搭建hexo\部署.png" style="zoom:80%"></li><li><p>打包产物放到<code>master</code>分支</p></li><li><p>优点是路径短，更适合用来做博客</p></li></ul><p>方法2：可以通过<code>https://[username].github.io/[repo]</code>的格式来访问部署的资源</p><ul><li>可以自定义仓库名</li><li>更适合用来展示demo</li><li>打包产物放到<code>gh-pages</code>分支</li></ul><p>我们使用第一种方式，还要先下载<code>hexo-deployer-git</code>，这个插件的作用如下：</p><ul><li>打包后，初次执行<code>hexo deploy</code>时：<ul><li>在博客根目录下，创建<code>.deploy_git</code>目录，然后拷贝<code>public</code>目录下的所有文件，到这个目录下</li><li>初始化<code>.deploy_git</code>目录为<code>git</code>仓库(<code>git init</code> )</li><li>根据<code>_config.yml</code>文件，添加远程仓库<code>origin</code></li><li>自动执行<code>git add .</code>，<code>git commit</code>和<code>git push -u origin master（分支可自定义）</code></li></ul></li><li>对于后续<code>hexo deploy</code>操作：<ul><li>删除<code>.deploy_git</code>目录下除了<code>.git</code>文件的所有文件</li><li>拷贝<code>public</code>目录下的所有文件，到这个目录下</li><li>然后再执行<code>git add .</code>，<code>git commit</code>和<code>git push</code>操作。</li></ul></li><li>总的来说，这个插件的作用就是简化了部署博客时，所需要的git操作，让不懂<code>git</code>操作的小白也能快速部署博客。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-deployer-git -D//安装到开发依赖</span><br></pre></td></tr></table></figure><p>再在<code>_config.yml</code>文件中进行相关配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/shiyuhuiya/shiyuhuiya.github.io.git</span> <span class="comment">#写自己的仓库路径</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>然后执行</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure><p>如果部署失败，可以尝试开启<code>steam++</code>加速github再次部署。</p><p><strong>优化方案：</strong>因为我们每次修改博客后，重新部署的时候，都要依次执行<code>hexo clean ，hexo g，gulp，hexo deploy</code>，这样未免太繁琐了，其实我们可以在<code>package.json</code>中配置：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span><span class="string">&quot;hexo clean &amp;&amp; hexo generate &amp;&amp; gulp &amp;&amp; hexo deploy&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>之后只需要执行<code>npm run deploy</code>，这四个命令就会自动按顺序串行执行，非常方便。</p><p>参考资料：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bilibili.com/video/BV1dt4y1Q7UE/?spm_id_from=333.1007.top_right_bar_window_default_collection.content.click&vd_source=00483a04a5a69136669373a8ea522a9b">【干货】Luke教你20分钟快速搭建个人博客系列(hexo篇) | 自动化部署在线编辑统统搞定 | 前端必会！_哔哩哔哩_bilibili</a></p><p>但是部署到github pages有一个明显的缺点，就是加载速度很慢。为什么加载速度很慢呢？<strong>因为github pages服务器在国外，离我们较远；距离越远，意味着要经过越多的网络结点，每个节点都会引入额外的延迟，遇到网络拥塞的概率也越大。</strong></p><h3 id="自定义github域名"><a href="#自定义github域名" class="headerlink" title="自定义github域名"></a>自定义github域名</h3><p>为了能让我们的域名<code>更有个性</code>（不会提高网站的加载速度），我们可以选择自定义域名，这需要我们购买域名；域名购买国内国外的都可以，只要域名解析后对应的服务器不是中国境内的，就<strong>不需要备案</strong>。可参考<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.zhihu.com/question/624841875/answer/3239063269">国内域名一定要备案吗？ - 知乎</a></p><p>国外域名购买流程比较简单，比较推荐的是<strong>namesilo</strong></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhuanlan.zhihu.com/p/33921436?s_r=0">Namesilo 域名购买及使用教程（附 Namesilo 优惠码） - 知乎</a></p><p>购买域名后，我们就能自定义我们的域名的dns解析方式；打开域名管理，在我们的域名下添加一条<code>CNAME</code>类型的dns记录，让对<code>自定义域名</code>的解析转变成对<code>用户名.github.io</code>域名的解析</p><p>具体<code>域名解析</code>方式已经在<code>《前端面试---网络》</code>一文中介绍，下面只给出几幅图（省略了本地dns服务器递归查询缓存的过程）。</p><p><strong>未自定义域名</strong>前的请求流程</p><img src="..\images\搭建hexo\未自定义域名.png" style="zoom:85%"><p><strong>自定义域名后</strong>的请求简化流程，比如我在<code>namesilo</code>网站上购买了<code>sanye.blog</code>这个域名，并在我的域名的dns解析记录下添加一条<code>CNAME</code>记录，让对域名<code>www.sanye.blog</code>域名的解析指向<code>用户名.github.io</code>域名的解析</p><img src="../images/搭建hexo/自定义域名.png"><p>拿到ip后访问对应的<code>githubpages</code>服务器，请求中携带的<code>host</code>是<code>www.sanye.blog</code>，因为我们在github上配置了，所以github知道对应的<code>默认域名</code>，然后就从<code>默认域名</code>中提取出<code>用户名</code>，根据<code>用户名</code>返回对应的资源。</p><p>添加自定义域名后，对原域名的访问也会<code>重定向</code>到自定义域名。在你的 GitHub Pages 仓库中，GitHub 会生成或更新一个名为 <code>CNAME</code> 的文件，其中包含你的自定义域名（例如 <code>www.sanye.blog</code>）。这个文件告诉 GitHub 你的站点应该通过哪个自定义域名访问。</p><p>建议在github pages中开启<strong>enfore https</strong>这样<code>直接访问自定义域名</code>也不会以http协议加载，而是强制用https协议访问，不会出现“网站不安全”的警告。</p><p>具体步骤参考文章：</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhuanlan.zhihu.com/p/393050270">Github 部署个人网页 | 自定义域名 - 知乎</a><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhuanlan.zhihu.com/p/393050270">Github 部署个人网页 | 自定义域名 - 知乎</a></p><blockquote><p>上述这篇文章“购买国内域名就要备份的说法是不准确的”</p></blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhuanlan.zhihu.com/p/405672922">搞懂自定义域名 - 知乎</a></p><p><strong>然而我并不建议给github pages自定义域名</strong>🤣，因为即便自定义了域名，也不会提高我们博客的访问速度，因为我们的博客还是部署在github服务器上的，访问速度还是很慢，为什么要浪费宝贵的域名呢</p><p>因为我们是给<code>[用户名].github.io</code>这个仓库自定义域名，这就意味着对<code>[用户名].github.io</code>这个域名的解析都会<code>重定向</code>到我们<code>自定义的域名</code>，这就导致，其他仓库，原本的访问url格式是，<code>https://[username].github.io/[repo]</code>，<strong>即便不自定义域名</strong>，也会被重定向到<code>https://自定义域名/[repo]</code>，所以最好还是把博客，迁移到vercel，然后给vercel服务器上的项目自定义域名，参考下文。</p><h3 id="如何提高博客的加载速度"><a href="#如何提高博客的加载速度" class="headerlink" title="如何提高博客的加载速度"></a>如何提高博客的加载速度</h3><ul><li><p><strong>我们可以选择把我们的博客部署到其他平台。</strong></p><p>参考<a target="_blank" rel="noopener external nofollow noreferrer" href="https://akilar.top/posts/812734f8/">使用第三方托管平台部署博客 | Akilarの糖果屋</a>；这篇文章介绍了其他的博客部署平台，<br>gitee：国内网站，但是目前pages功能停用了，除此之外还有其他问题;</p><p>Netlify：国外网站，免费，但是注册麻烦，需要hotmail或者gmail等国外常用邮箱，一顿操作下来发现还是白忙活🥲;</p><p>webify：腾讯的产品，要money，没有尝试过;</p><p><strong>vercel</strong>：重点介绍。</p></li><li><p><strong>打包静态资源</strong></p><p><strong>打包html,js,css</strong></p><p>参考文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://akilar.top/posts/49b73b87/">使用gulp压缩博客静态资源 | Akilarの糖果屋</a></p><p>执行<code>hexo g</code>指令后，我们可以看到<strong>public文件夹</strong>中生成了一系列的静态文件，比如<code>html,css,js</code>这些文件的内容格式是非常容易阅读的，显然，他们是未经过压缩的，我们可以借助打包工具<strong>gulp</strong>，实现对这些静态资源的打包，然后再部署到网站上去，能在一定程度上提高我们博客的加载速度。</p><ul><li><p>安装Gulp插件：在博客根目录<code>[Blogroot]</code>打开终端，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --global gulp-cli <span class="comment">#全局安装gulp指令集</span></span><br><span class="line">npm install gulp --save <span class="comment">#安装gulp插件</span></span><br></pre></td></tr></table></figure></li><li><p>安装各个下属插件（安装到开发环境），以实现对各类静态资源的压缩：</p><ul><li><p>压缩HTML：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-htmlclean --save-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用gulp-html-minifier-terser可以压缩HTML中的ES6语法</span></span><br><span class="line">npm install gulp-html-minifier-terser --save-dev</span><br></pre></td></tr></table></figure></li><li><p>压缩CSS：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-clean-css --save-dev</span><br></pre></td></tr></table></figure></li><li><p>压缩js：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-terser --save-dev</span><br></pre></td></tr></table></figure></li></ul></li><li><p>在博客根目录下新建<code>gulpfile.js</code>文件，并书以下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用到的各个插件</span></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> cleanCSS = <span class="built_in">require</span>(<span class="string">&#x27;gulp-clean-css&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-html-minifier-terser&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlclean&#x27;</span>);</span><br><span class="line"><span class="comment">// gulp-tester</span></span><br><span class="line"><span class="keyword">var</span> terser = <span class="built_in">require</span>(<span class="string">&#x27;gulp-terser&#x27;</span>);</span><br><span class="line"><span class="comment">// 压缩js</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;compress&#x27;</span>, <span class="function">() =&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// &#x27;./public/**/*.js&#x27;表示从当前目录下的public文件夹开始，匹配所有子目录（后代目录）中的.js文件</span></span><br><span class="line">  <span class="comment">// &#x27;!./public/**/*.min.js&#x27;是一个否定模式，意味着排除所有已经带有.min.js扩展名的文件</span></span><br><span class="line">  gulp.<span class="title function_">src</span>([<span class="string">&#x27;./public/**/*.js&#x27;</span>, <span class="string">&#x27;!./public/**/*.min.js&#x27;</span>])</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">terser</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">    <span class="comment">//压缩后的js文件将会被放置回public文件夹下。</span></span><br><span class="line">    <span class="comment">//注意，这会覆盖原有的非最小化版本的js文件，除非你在前面的步骤中对文件进行了重命名（例如添加.min后缀），</span></span><br><span class="line">    <span class="comment">//以便与原始文件区分开来。</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//压缩css</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-css&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>([<span class="string">&#x27;./public/**/*.css&#x27;</span>])</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">cleanCSS</span>(&#123;</span><br><span class="line">            <span class="attr">compatibility</span>: <span class="string">&#x27;ie11&#x27;</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//压缩html</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-html&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/*.html&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">htmlclean</span>())</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">htmlmin</span>(&#123;</span><br><span class="line">            <span class="attr">removeComments</span>: <span class="literal">true</span>, <span class="comment">//清除html注释</span></span><br><span class="line">            <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>, <span class="comment">//压缩html</span></span><br><span class="line">            <span class="attr">collapseBooleanAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//省略布尔属性的值，例如：&lt;input checked=&quot;true&quot;/&gt; ==&gt; &lt;input /&gt;</span></span><br><span class="line">            <span class="attr">removeEmptyAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//删除所有空格作属性值，例如：&lt;input id=&quot;&quot; /&gt; ==&gt; &lt;input /&gt;</span></span><br><span class="line">            <span class="attr">removeScriptTypeAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//删除&lt;script&gt;的type=&quot;text/javascript&quot;</span></span><br><span class="line">            <span class="attr">removeStyleLinkTypeAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">//删除&lt;style&gt;和&lt;link&gt;的 type=&quot;text/css&quot;</span></span><br><span class="line">            <span class="attr">minifyJS</span>: <span class="literal">true</span>, <span class="comment">//压缩页面 JS</span></span><br><span class="line">            <span class="attr">minifyCSS</span>: <span class="literal">true</span>, <span class="comment">//压缩页面 CSS</span></span><br><span class="line">            <span class="attr">minifyURLs</span>: <span class="literal">true</span>  <span class="comment">//压缩页面URL</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//注册一个名为&#x27;default&#x27;的任务。这个任务将会并行运行三个子任务：&#x27;compress&#x27;、&#x27;minify-css&#x27;和&#x27;minify-html&#x27;。</span></span><br><span class="line"><span class="comment">//然后在控制台执行gulp，就会默认执行default任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, gulp.<span class="title function_">parallel</span>(</span><br><span class="line">  <span class="string">&#x27;compress&#x27;</span>, <span class="string">&#x27;minify-css&#x27;</span>, <span class="string">&#x27;minify-html&#x27;</span></span><br><span class="line">))</span><br></pre></td></tr></table></figure><p>上述代码中用到了一些gulp的api：</p><ul><li><code>gulp.task</code>：第一个参数传入任务名，第二个参数传入一个函数，指明任务内容</li><li><code>gulp.src</code>：传入一个数组，数组中的元素是文件路径，指定要处理哪些文件，经常作为gulp压缩流程的<strong>起点</strong>。</li><li><code>gulp.dest</code>：传入文件输出路径，通常作为gulp压缩流的终点，传入最后一个<code>pipe()</code>操作中</li><li><code>gulp.parallel</code>：Gulp 4.x版本引入的一个新特性，它允许指定一组任务以并行方式执行。</li></ul></li></ul><p><strong>打包图片</strong></p><p>其实官方文档<a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.js.org/posts/4073eda/">Butterfly 文檔(六) 進階教程 | Butterfly</a>也提供了相关的打包方法，本质就是对本地的图片压缩后再使用，减小图片体积。</p><ul><li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://tinypng.com/">TinyPNG – Compress WebP, PNG and JPEG images intelligently</a></p></li><li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://saerasoft.com/caesium/">Caesium - Image Compressor</a></p></li></ul></li><li><p><strong>cdn加速</strong></p><p>cdn加速在《前端面试—网络》一文中以及介绍过了，不赘述。</p><p>这里谈谈如何如何给国外域名使用CDN加速</p><p>可参考文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhuanlan.zhihu.com/p/393779644">Github 部署 | CDN 加速网页，速度嗖嗖的快！ - 知乎</a></p><p>这篇文章其实还是<strong>有问题的</strong>，虽然<strong>腾讯云</strong>能给国外域名提供cdn加速，但是<code>加速区域</code>只能选择国外，加速国内就要求<strong>域名备份</strong>(当然国内域名开通CDN加速也要备份)，也就是说，我们在源服务器（github pages服务器）上的部署的博客文件只能被<code>国外的cdn服务器</code>缓存，对在国内访问网站的加载速度的提高<strong>并不明显</strong>，而且开通cdn加速后还要自己给自定义域名申请<strong>ssl证书</strong>(因为存储我们博客的cdn服务器需要ssl证书，才能以https协议访问)，这个过程还要验证域名，而且不知道为什么一直通过不了验证，干脆放弃……</p><p>使用腾讯云给我们的域名<strong>接入cdn加速</strong>后，会得到一个<code>CNAME</code>，然后我们在我们的域名的<code>dns记录</code>上添加对应的<code>CNAME</code>记录即可。</p><p>还有就是在上面的文章中，给我们的国外域名加速，给<code>cdn服务器</code>配置的<code>源站地址</code>是<code>github pages</code>服务器的四个<strong>ip地址</strong>，查阅资料后发现，其实源站地址指定为<strong>用户名.github.io</strong>这个域名也是<strong>可行且容易理解的</strong>，所有形如<strong>用户名.github.io</strong>的域名都只会被解析到这<code>4个ip地址</code>中的<strong>一个</strong>，<strong>也就是说这4个ip可以对应多个域名</strong>，<strong>一个域名也能对应不止一个ip地址</strong>，这些 IP 地址通常指向<strong>相同的资源</strong>。具体来说，这些 IP 地址背后的服务器存储的资源是相同的，但它们可能分布在不同的地理位置或数据中心，以实现<strong>负载均衡和提高可用性</strong>。</p><p>在阅读butterfly文档的过程中发现竟然提供了<strong>cdn加速</strong>的方案？了解之后发现是一些国内的网站，主动给一些国外的常用的前端资源提供了cdn加速，并免费提供访问的cdn链接，然而我们的博客生成静态资源显然是<strong>享受不到</strong>的这种免费的cdn加速的。但是如果你使用到了某些外部链接，可以考虑把他们替换为经过cdn加速的链接 ，从而提高博客加载速度。</p><p>总之给部署在github上的博客接入<code>CDN加速</code>是一件<strong>很麻烦的事情</strong>，其实用<strong>vercel</strong>部署自己的博客访问速度其实也很nice了，因为<code>vercel</code>提供了免费的cdn服务。</p></li></ul><h3 id="Vercel"><a href="#Vercel" class="headerlink" title="Vercel"></a>Vercel</h3><h4 id="账号注册"><a href="#账号注册" class="headerlink" title="账号注册"></a>账号注册</h4><p>注册账号简单且<strong>免费</strong>，直接使用<code>github</code>账号登录即可，在国内的访问速度也<strong>比github pages要快</strong>，并且何以导入git仓库，部署起来非常方便，后续在对应仓库中推送新的提交也会<strong>自动部署</strong>，省心省力。</p><p>部署步骤可参考文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/qq_44960878/article/details/131548656">如何使用 Vercel 部署自己的 Hexo 博客_vercel部署博客-CSDN博客</a></p><h4 id="自定义域名"><a href="#自定义域名" class="headerlink" title="自定义域名"></a>自定义域名</h4><p>在Vercel上部署好静态站点之后，会获得哦一个自动分配的域名，以<strong>vercel.app</strong>结尾，就像<code>githubpages</code>也会给默认域名一样，不幸的是，这个域名被dns污染了（被墙了），有人不想我们这么简单就能访问这个网站，我们无法通过这个<code>自动分配</code>的域名，访问到我们的项目；但是我们还是有解决办法的，比较推荐的就是<strong>自定义域名</strong>，按照提示操作即可，又不幸的是，自定义域名使用到的<code>cname-vercel-dns.com</code>也存在被dns污染的问题，对此网上常见的解决办法是把<code>cname-vercel-dns.com</code>替换成<strong>固定的ip值</strong>，或者替换成<code>cname-china.vercel-dns.com</code>，还有一种方法是借助<code>cloudfare</code>，把对<code>cname-vercel-dns.com</code>的解析工作交给<code>cloudfare</code>，这个工作默认是你<strong>购买的域名的服务商</strong>提供的。</p><blockquote><p>个人猜测：如果购买的是国内的域名，使用的就是国内提供的dns解析服务，就存在被墙的风险，所以推荐购买国外域名，使用<strong>国外的dns解析服务</strong>，也许就不会有这个问题，至少博主使用国外的域名暂时没遇到什么问题</p></blockquote><p>可参考文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/qq_34761385/article/details/133634798">Vercel部署个人静态之DNS污染劫持问题_vercel dns-CSDN博客</a></p><p>其中裸域名（根域名）比如<code>sanye.blog</code>指向的是<code>76.76.21.21</code>，我们直接访问这个ip，就等同于登录<code>vercel</code></p><p>其中<code>www.sanye.blog</code>指向的是<code>cname-vercel-dns.com</code>或者<code>76.223.126.88</code>，也等同于直接登录<code>vercel</code></p><h4 id="自动打包"><a href="#自动打包" class="headerlink" title="自动打包"></a><strong>自动打包</strong></h4><p>然后其实我们可以直接把项目的源码（比如vue项目）忽略掉<code>node_modules</code>目录后，push到github对应的仓库中去，然后再部署到vercel上去，vercel一般会自动识别vue项目，vercel 在部署时会执行以下步骤：</p><ol><li><strong>克隆代码</strong>：从 GitHub 仓库中拉取代码。</li><li><strong>安装依赖</strong>：根据配置文件运行 <code>npm install</code> 或 <code>yarn install</code>。</li><li><strong>构建项目</strong>：运行指定的构建命令（如 <code>npm run build</code>）。</li><li><strong>部署静态文件</strong>：将构建后的静态文件部署到其全球 CDN。</li></ol><p>从这一点出发的话，其实我们不需要借助<code>hexo-deployer-git</code>来部署我们的项目，因为这个工具只会将我们build后，生产的public文件下的资源部署到github对应的仓库上，这就要求我们手动进行打包（hexo g）。</p><h4 id="支持history路由"><a href="#支持history路由" class="headerlink" title="支持history路由"></a><strong>支持history路由</strong></h4><p>我们知道，使用history路由的项目是需要后端配合的，但是我们项目部署的位置是vercel服务器，该如何让其配合我们呢？</p><p>Vercel 提供了一个简单的配置文件 <code>vercel.json</code>，可以用来指定如何处理路由。以下是一个示例配置：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;routes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/index.html&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li><strong>解释</strong>：<ul><li><code>src: &quot;/(.*)&quot;</code>：匹配所有的路径。</li><li><code>dest: &quot;/index.html&quot;</code>：将所有请求重定向到 <code>index.html</code> 文件。</li><li>这样，无论用户访问什么路径，Vercel 都会返回 <code>index.html</code>，让前端路由接管。</li></ul></li><li><strong>操作步骤</strong>：<ol><li>在项目的<code>public</code>目录下创建一个名为 <code>vercel.json</code> 的文件（确保打包后<code>vercel.json</code> 文件会在根目录的位置）。</li><li>将上述内容复制到文件中。</li><li>部署项目到 Vercel。</li></ol></li></ul><p>当然我们的博客项目并不需要使用history路由，因为我们的博客项目是<strong>多页面应用程序</strong></p><p>根据项目部署的位置不同，上述json文件可能也需要做适当的修改，不过无论如何， <code>vercel.json</code>都应该放到<strong>服务器的根目录下</strong>，下面分享一下我部署项目编写的json文件：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;routes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="comment">// 所有以/bigEvent/assets/开头的请求都会被这个规则处理，而(.*)部分则捕获了/bigEvent/assets/之后的所有字符</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/bigEvent/assets/(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="comment">// 使用$1来引用前面捕获组中的内容，如果请求是/bigEvent/assets/index.js，则$1就是index.js</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/bigEvent/assets/$1&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/bigEvent/favicon.ico&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/bigEvent/favicon.ico&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/bigEvent/(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/bigEvent/index.html&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/rabbit/assets/(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/rabbit/assets/$1&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/rabbit/favicon.ico&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/rabbit/favicon.ico&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/rabbit/(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/rabbit/index.html&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="优化加载速度"><a href="#优化加载速度" class="headerlink" title="优化加载速度"></a>优化加载速度</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//_config.butterfly.yml</span></span><br><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="comment"># The CDN provider for internal and third-party scripts</span></span><br><span class="line">  <span class="comment"># Options for both: local/jsdelivr/unpkg/cdnjs/custom</span></span><br><span class="line">  <span class="comment"># <span class="doctag">Note:</span> Dev version can only use &#x27;local&#x27; for internal scripts</span></span><br><span class="line">  <span class="comment"># <span class="doctag">Note:</span> When setting third-party scripts to &#x27;local&#x27;, you need to install hexo-butterfly-extjs</span></span><br><span class="line">  <span class="attr">internal_provider:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">third_party_provider:</span> <span class="string">local</span></span><br></pre></td></tr></table></figure><p>我们可以通过下载<code>hexo-butterfly-extjs</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-butterfly-extjs</span><br></pre></td></tr></table></figure><p>并配置<code>third_party_provider</code>为<code>local</code>，然后我们加载一些第三方的<code>css</code>和<code>js</code>文件就不需要通过cdn了，因为我们已经把这些第三方文件下载到了本地，我们打包后，可以观察到<code>public</code>目录下多出了<code>pluginsSrc</code>目录。</p><p>按照上述的步骤配置后，我们就能明显的发现，开发和生产过程中，网站的加载速度变快了许多。</p><p>但是当我们部署博客的时候，发现出错了，并提示”路径 <code>pluginsSrc/twikoo/dist/twikoo.all.min.js:2</code> 存在一个 Tencent Cloud Secret ID”，因为GitHub 实施了一项名为“Push Protection”的安全功能，它会扫描你的提交以防止意外泄露敏感信息（例如 API 密钥、密码等）。在这个案例中，系统发现了 Tencent Cloud Secret ID，并阻止了这次推送。</p><p>所以怎么办？我们先<code>cd</code>到<code>.deploy_git</code>，执行<code>git reset --hard &lt;上一次提交的哈希值&gt;</code> ，撤销这次包含敏感信息的提交（还有一种方法，就是直接删除<code>.deploy_git</code>目录，不过这样你之前的提交记录都没了），然后由于我们每次打包后，public目录下都会包含这个<code>twikoo.all.min.js</code>文件，所以我们需要自动删除它。</p><p>在<code>source</code>目录下新建<code>del.js</code>文件：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    fs.<span class="title function_">unlinkSync</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;pluginsSrc/twikoo/dist/twikoo.all.min.js&#x27;</span>));</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件删除成功&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;文件删除失败:&#x27;</span>, err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后这个文件就会被打包到public目录的根目录下。</p><p>然后我们还要修改一下部署指令，每次部署的时候，自动删除这个文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;del&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node ./public/del.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean &amp;&amp; hexo generate &amp;&amp; npm run del &amp;&amp; gulp &amp;&amp; hexo deploy&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h2 id="感想与结语"><a href="#感想与结语" class="headerlink" title="感想与结语"></a>感想与结语</h2><p><code>hexo+butterfly框架</code>能帮助我们迅速开发一个美观实用的博客，这些框架，主题，以及相关插件的诞生，基于开发者雄厚的html，css，js等前端知识积累；做为刚入们的前端开发者，我也知道给光看文档能学到的实在是有限，在网上找资料学到的也是偏向实践，想要深入了解原理，自己做出这些效果，还得多学多练，打好自己前端基础。</p><p>如果你还想进一步美化自己的博客，给自己的博客添加更多的功能，你可以选择不断的阅读butterfly官方文档，也可以去网上查找更多的资料，以下是我推荐的一些资料，希望能帮助到你。</p><ul><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/zh-cn/">Hexo官方文档</a></li><li>butterfly魔改教程：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.zhheo.com/page.html">页面 | Butterfly主题美化教程</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.itbaima.cn/document/o0ab271mkdsas87">md语法学习</a></li><li>butterfly主题官方文档：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.js.org/">Butterfly - A Simple and Card UI Design theme for Hexo</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.namesilo.com/">NameSilo官网</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhutix.com/tag/cursors/?shuxing=jian">鼠标指针 - 光标 - 电脑鼠标指针下载 - 致美化 - 漫锋网</a></li><li>demo<ul><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zfe.space/">小冰博客 - 做个有梦想的人！</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.captainz.cc/">Hyper Tech - 专注于质量的博客。</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.cnblogs.com/an-shiguang">時光心向阳 - 博客园</a></li></ul></li></ul><p>​</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://www.sanye.blog">三叶sanye</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://www.sanye.blog/posts/42807cbc.html">https://www.sanye.blog/posts/42807cbc.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.sanye.blog" target="_blank">三叶的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/hexo/">hexo</a><a class="post-meta__tags" href="/tags/git/">git</a><a class="post-meta__tags" href="/tags/github/">github</a><a class="post-meta__tags" href="/tags/butterfly/">butterfly</a></div><div class="post-share"><div class="social-share" data-image="/images/cover/%E6%B1%9F%E5%8D%97.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/posts/72ebd24d.html" title="hexo博客搭建的一些思考"><img class="cover" src="/images/cover/%E6%98%9F%E7%A9%BA.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">hexo博客搭建的一些思考</div></div><div class="info-2"><div class="info-item-1">为什么要给域名申请SSL证书只有给域名申请了SSL证书，才能以https协议访问域名，才能确保客户端和服务端的会话是加密的，是安全的。 httpshttp是不安全的，在客户端与服务端使用http通信的时候，请求响应报文都是明文的，消息被截获后通信内容就泄漏了。 https在http的基础上，使用TLS&#x2F;SSL加密，从而确保通信是安全的。 使用https协议访问某个域名&#x2F;网站，除了基本的DNS解析，TCP三次握手建立连接，还要经过SSL握手，然后才能开始加密通信。 TLS&#x2F;SSLTLS&#x2F;SSL加密过程中既使用了对称加密，也使用了非对称加密。使用非对称加密是为了得到一个会话密钥，这个会话密钥并没有进行传输，而是双方通过计算得出来的，握手成功后，再使用这个会话密钥进行对称加密。 对称加密使用同一把密钥进行加密和解密。发送方和接收方必须共享相同的密钥。优点是解密速度快，适合大量数据的加密，缺点是密钥必须共享，这个过程密钥可能被窃取。 非对称加密使用一对密钥：公钥（公开）和私钥（保密）。公钥用于加密，私钥用于解密。优点是只传输公钥，私钥不进行传输，泄漏风险很小，很安全，缺点是解密速度慢。 SSL证书SSL证书其实就是保存在源服务器的数据文件，想要证书生效必须向CA申请，表明域名是属于谁的(可以理解为域名必须实名认证，有人需要为这个域名负责)，还包含了公钥和私钥。 TLS&#x2F;SSL握手过程在握手的过程中，服务端会把自己的SSL证书和公钥发送给客户端验证，浏览器会通过查询浏览器的证书信任列表来判断这个证书是否有效，证书无效则浏览器显示这个连接不安全，有效则继续进行后续操作，经过非对称加密得到一个会话密钥，握手结束。 在握手过程中第一随机数，第二随机数，和公钥都是明文传输的，就意味着有暴露的风险，但是第三随机数的传输是经过公钥加密的，只能用私钥解密,也就是只有服务端知道第三随机数是什么，这就是一次非对称加密，然后再用那3个随机数计算得到会话密钥，会话密钥没有进行传输所以是安全的，握手结束后，后续的通信都用这个会话密钥加密。 详细解释可参考：HTTPS是什么？加密原理和证书。SSL&#x2F;TLS握手过程_哔哩哔哩_bilibili 为什么接入cdn加速后还要申请SSL证书在我们不接入cdn加速服务之前，我们无论是访问用户名.github.io还是自定义域名，最终都是从GitHub pages服务器拿到数据，SSL握手的对象也是githubpages服务器, github为我们免费生成的SSL证书是存储在githubpages服务器的;但是我们接入cdn服务后，我们就不是从源服务器（githubpages服务器）取数据了，而是cdn服务器，握手的对象就是cdn服务器，所以我们还需要手动为我们的自定义域名（或者默认域名）申请一次SSL证书，存储在CDN服务器中，后续我们才能使用https协议访问cdn服务器。 gulp和webpack的区别 Gulp是基于nodejs流的前端构建工具，可以实现文件的转换，压缩，合并，监听，自动部署等功能。gulp拥有强大的插件库，基本上满足开发需求，而且开发人员也可以根据自己的需求开发自定义插件。难得是，gulp只有五个api，容易上手。配置文件是gulpfile.js 12345678const gulp = require(&#x27;gulp&#x27;);const sass =...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/518e617c.html" title="git"><img class="cover" src="/images/cover/dog.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-09</div><div class="info-item-2">git</div></div><div class="info-2"><div class="info-item-1">在此之前，推荐一个前端学习路线：https://objtube.github.io/front-end-roadmap 其中对于git部分给了许多宝贵的资源。 Git的诞生 - Git教程 - 廖雪峰的官方网站 Learn Git Branching 是什么一个由Linus使用C语言开发的，免费开源的，分布式的，代码版本控制系统，帮助开发团队维护代码。 可以用来记录代码内容，切换代码版本，多人开发时高效合并代码内容 分布式vs集中式集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆。 集中式版本控制系统最大的毛病就是必须联网才能工作，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要5分钟，这还不得把人给憋死啊。 那分布式版本控制系统与集中式版本控制系统有何不同呢？首先，分布式版本控制系统根本没有中央服务器，每个人的电脑上都是一个完整的版本库，这样，你工作的时候，就不需要联网了，因为版本库就在你自己的电脑上，那分布式的意思就是，版本库分布在每一台电脑上。既然每个人电脑上都有一个完整的版本库，那多个人如何协作呢？比方说你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。 和集中式版本控制系统相比，分布式版本控制系统的安全性要高很多，因为每个人电脑里都有完整的版本库，某一个人的电脑坏掉了不要紧，随便从其他人那里复制一个就可以了。而集中式版本控制系统的中央服务器要是出了问题，所有人都没法干活了。 在实际使用分布式版本控制系统的时候，其实很少在两人之间的电脑上推送版本库的修改，因为可能你们俩不在一个局域网内，两台电脑互相访问不了，也可能今天你的同事病了，他的电脑压根没有开机。因此，分布式版本控制系统通常也有一台充当中央服务器的电脑，但这个服务器的作用仅仅是用来方便“交换”大家的修改，没有它大家也一样干活，只是交换修改不方便而已。 安装最早Git是在Linux上开发的，很长一段时间内，Git也只能在Linux和Unix系统上跑。不过，慢慢地有人把它移植到了Windows上。现在，Git可以在Linux、Unix、Mac和Windows这几大平台上正常运行了。 到官网下载安装包运行，不需要手动配置环境变量 安装完成后，在开始菜单里找到“Git”-&gt;“Git Bash”，蹦出一个类似命令行窗口的东西，就说明Git安装成功！ 配置身份 12git config --global user.name &quot;sanye&quot;git config --global user.email &quot;xxxxx@qq.com&quot; 每次提交代码时需要表明自己的身份，因为Git是分布式版本控制系统，所以，每个机器都必须自报家门：你的名字和Email地址。你也许会担心，如果有人故意冒充别人怎么办？这个不必担心，首先我们相信大家都是善良无知的群众，其次，真的有冒充的也是有办法可查的。注意git...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/%E4%B8%89%E5%8F%B6.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">三叶sanye</div><div class="author-info-description">记录学习，分享知识</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="https://space.bilibili.com/660655866?spm_id_from=333.1007.0.0" rel="external nofollow noreferrer" target="_blank" title="Bilibli"><i class="fa-brands fa-bilibili" style="color:#74c0fc"></i></a><a class="social-icon" href="https://github.com/syhy" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:3519450570@qq.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFhexo"><span class="toc-number">1.</span> <span class="toc-text">什么是hexo?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85hexo"><span class="toc-number">2.</span> <span class="toc-text">安装hexo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hexo%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">3.</span> <span class="toc-text">hexo常用指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text">项目结构分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98%EF%BC%9Abutterfly"><span class="toc-number">5.</span> <span class="toc-text">更换主题：butterfly</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0"><span class="toc-number">6.</span> <span class="toc-text">新建博客文章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%88%86%E7%B1%BB"><span class="toc-number">7.</span> <span class="toc-text">新建分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E6%A0%87%E7%AD%BE"><span class="toc-number">8.</span> <span class="toc-text">新建标签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A1%B5"><span class="toc-number">9.</span> <span class="toc-text">自定义主页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%8F%9C%E5%8D%95"><span class="toc-number">9.1.</span> <span class="toc-text">自定义菜单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">9.2.</span> <span class="toc-text">添加搜索功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A6%96%E9%A1%B5%E5%9B%BE%E7%89%87"><span class="toc-number">9.3.</span> <span class="toc-text">自定义首页图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E5%9B%BE%E7%89%87"><span class="toc-number">9.4.</span> <span class="toc-text">引入图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B%E7%AB%99banner"><span class="toc-number">9.5.</span> <span class="toc-text">B站banner</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A4%BE%E4%BA%A4%E5%9B%BE%E6%A0%87"><span class="toc-number">9.6.</span> <span class="toc-text">自定义社交图标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E6%95%B0%E7%9B%AE"><span class="toc-number">9.7.</span> <span class="toc-text">统计网站访客数目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#live2D"><span class="toc-number">9.8.</span> <span class="toc-text">live2D</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B0%B8%E4%B9%85%E9%93%BE%E6%8E%A5"><span class="toc-number">10.</span> <span class="toc-text">永久链接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E8%84%9A"><span class="toc-number">11.</span> <span class="toc-text">自定义页脚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB"><span class="toc-number">12.</span> <span class="toc-text">加载动画</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%BC%A0%E6%A0%87%E6%A0%B7%E5%BC%8F"><span class="toc-number">13.</span> <span class="toc-text">修改鼠标样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SEO%E4%BC%98%E5%8C%96"><span class="toc-number">14.</span> <span class="toc-text">SEO优化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E5%8D%9A%E5%AE%A2%E5%88%B0github"><span class="toc-number">15.</span> <span class="toc-text">部署博客到github</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-number">15.1.</span> <span class="toc-text">部署方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89github%E5%9F%9F%E5%90%8D"><span class="toc-number">15.2.</span> <span class="toc-text">自定义github域名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E5%8D%9A%E5%AE%A2%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6"><span class="toc-number">15.3.</span> <span class="toc-text">如何提高博客的加载速度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vercel"><span class="toc-number">15.4.</span> <span class="toc-text">Vercel</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%A6%E5%8F%B7%E6%B3%A8%E5%86%8C"><span class="toc-number">15.4.1.</span> <span class="toc-text">账号注册</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D"><span class="toc-number">15.4.2.</span> <span class="toc-text">自定义域名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85"><span class="toc-number">15.4.3.</span> <span class="toc-text">自动打包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%AF%E6%8C%81history%E8%B7%AF%E7%94%B1"><span class="toc-number">15.4.4.</span> <span class="toc-text">支持history路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6"><span class="toc-number">15.4.5.</span> <span class="toc-text">优化加载速度</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%84%9F%E6%83%B3%E4%B8%8E%E7%BB%93%E8%AF%AD"><span class="toc-number">16.</span> <span class="toc-text">感想与结语</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/19656fd5.html" title="react"><img src="/images/cover/%E6%B1%9F%E5%8D%97.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="react"></a><div class="content"><a class="title" href="/posts/19656fd5.html" title="react">react</a><time datetime="2025-02-20T13:33:23.000Z" title="发表于 2025-02-20 21:33:23">2025-02-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/518e617c.html" title="git"><img src="/images/cover/dog.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="git"></a><div class="content"><a class="title" href="/posts/518e617c.html" title="git">git</a><time datetime="2025-02-09T08:07:36.000Z" title="发表于 2025-02-09 16:07:36">2025-02-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b0415b82.html" title="前端刷题记录"><img src="/images/cover/%E6%98%9F%E7%A9%BA.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="前端刷题记录"></a><div class="content"><a class="title" href="/posts/b0415b82.html" title="前端刷题记录">前端刷题记录</a><time datetime="2025-02-09T07:04:01.000Z" title="发表于 2025-02-09 15:04:01">2025-02-09</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/images/cover/1.png)"><div id="footer-wrap"><div class="footer_custom_text"><div id="sanye"><svg class="icon" aria-hidden="true"><use href="#icon-banquan"></use></svg><span>2024 - 2025 By 三叶sanye</span><svg class="icon" aria-hidden="true"><use href="#icon-sanyecao"></use></svg></div><div id="runtime"></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/pluginsSrc/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script src="/js/time.js"></script><script src="/js/iconfont.js"></script><script src="/bilibiliBanner/banner.js" defer></script><script defer id="ribbon" src="/pluginsSrc/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="false"></script><script src="/pluginsSrc/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script id="click-heart" src="/pluginsSrc/butterfly-extsrc/dist/click-heart.min.js" async mobile="false"></script><script async data-pjax src="/js/busuanzi.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,display:{position:"left",width:120,height:240},mobile:{show:!0},react:{opacity:.7}})</script></body></html>